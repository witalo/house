{% extends 'home.html' %}
{% load static %}
{% block title %}
    Reporte de ordenes
{% endblock title %}
{% block headerleft %}
    Reporte de ordenes
{% endblock headerleft %}
{% block headerright %}
    Reporte de ordenes
{% endblock headerright %}

{% block body %}
    <div class="row">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header">
                    <div class="row">
                        <div class="col-md-3">
                            <label class="mb-0">Fecha Inicial</label>
                            <input type="date" class="form-control form-control-sm" value="{{ date }}" id="init"
                                   name="init">
                        </div>
                        <div class="col-md-3">
                            <label class="mb-0">Fecha Final</label>
                            <input type="date" class="form-control form-control-sm" value="{{ date }}" id="end"
                                   name="end">
                        </div>
                        <div class="col-md-3 align-self-end">
                            <select class="form-control form-control-sm" id="type" name="type">
                                {% for t in type_set %}
                                    {% if t.0 == 'A' %}
                                        <option selected value="{{ t.0 }}">{{ t.1 }}</option>
                                    {% else %}
                                        <option value="{{ t.0 }}">{{ t.1 }}</option>
                                    {% endif %}
                                {% endfor %}
                            </select>
                        </div>
                        <div class="col-md-3 align-self-end">
                            <button type="button" class="btn btn-sm btn-outline-primary" onclick="SearchOrders()"><i
                                    class="fa fa-search"></i> Buscar ordenes
                            </button>
                        </div>
                    </div>
                </div>
                <div class="card-body table-responsive mailbox-messages" id="orders-grid">
                    {% include "orders/orders_grid.html" %}
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="pdfModal" tabindex="-1" data-backdrop="static" data-keyboard="false"
         aria-labelledby="pdfModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-sm">
            <div class="modal-content">
                <div class="modal-header bg-primary p-2">
                    <h6 class="modal-title">TICKET</h6>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body p-2">
                    <iframe src="" width="100%" height="680px" id="pdfFrame"></iframe>
                </div>
                <div class="modal-footer">
                    <button type="button" id="close-ticket" class="btn btn-secondary" data-dismiss="modal">Cerrar
                    </button>
                </div>
            </div>
        </div>
    </div>
{% endblock body %}

{% block extrajs %}
    <script type="text/javascript" src="{% static 'orders/OrdersList.js' %}">

    </script>
{% endblock extrajs %}
